import * as tslib_1 from "tslib";
import { getNativeAudioContext } from '../helpers/get-native-audio-context';
var DEFAULT_OPTIONS = {
    channelCount: 2,
    channelCountMode: 'max',
    channelInterpretation: 'speakers'
};
export var createMediaStreamAudioSourceNodeConstructor = function (createNativeMediaStreamAudioSourceNode, noneAudioDestinationNodeConstructor) {
    return /** @class */ (function (_super) {
        tslib_1.__extends(MediaStreamAudioSourceNode, _super);
        function MediaStreamAudioSourceNode(context, options) {
            var _this = this;
            var nativeContext = getNativeAudioContext(context);
            var mergedOptions = tslib_1.__assign({}, DEFAULT_OPTIONS, options);
            var nativeMediaStreamAudioSourceNode = createNativeMediaStreamAudioSourceNode(nativeContext, mergedOptions);
            _this = _super.call(this, context, nativeMediaStreamAudioSourceNode, null) || this;
            // Bug #63: Edge & Firefox do not expose the mediaStream yet.
            _this._mediaStream = mergedOptions.mediaStream;
            _this._nativeMediaStreamAudioSourceNode = nativeMediaStreamAudioSourceNode;
            return _this;
        }
        Object.defineProperty(MediaStreamAudioSourceNode.prototype, "mediaStream", {
            get: function () {
                return (this._nativeMediaStreamAudioSourceNode.mediaStream === undefined) ?
                    this._mediaStream :
                    this._nativeMediaStreamAudioSourceNode.mediaStream;
            },
            enumerable: true,
            configurable: true
        });
        return MediaStreamAudioSourceNode;
    }(noneAudioDestinationNodeConstructor));
};
//# sourceMappingURL=/build/es2015/factories/media-stream-audio-source-node-constructor.js.map